<div id="technicalInterviewTab" class="tab">
  <div class="content-scroll" *ngIf="technicalInterviewForm">
    <form [formGroup]="technicalInterviewForm" fxLayout="column">
      <div fxFlex="100" fxLayoutGap="16px">
        <mat-form-field
          fxFlex="30"
          class="example-full-width"
          appearance="outline"
          *ngIf="this.visibleResume === false">
          <mat-label>Nome do Candidato</mat-label>
          <input
            type="text"
            placeholder="Candidato"
            aria-label="text"
            #filterResume
            matInput
            [matAutocomplete]="autoResume"
            [formControl]="ResumeControl" />
          <mat-error
            *ngIf="ResumeControl && ResumeControl.hasError('required')">
            {{ 'validators.validator-required' | translate }}
          </mat-error>
          <mat-error
            *ngIf="
              ResumeControl &&
              !ResumeControl.hasError('required') &&
              ResumeControl.hasError('incorrect')
            ">
            {{ 'validators.select-option' | translate }}
          </mat-error>
          <mat-autocomplete
            autoActiveFirstOption
            #autoResume="matAutocomplete"
            [displayWith]="displayFnResume">
            <mat-option *ngFor="let resume of filteredResumes" [value]="resume">
              {{ resume.firstName }}
              {{ resume.lastName }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
        <mat-form-field
          appearance="outline"
          *ngIf="this.visibleResume === true"
          fxFlex="35"
          class="example-full-width">
          <mat-label>Nome do Candidato</mat-label>
          <input
            disabled
            matInput
            disableRipple
            [value]="this.ResumeControl.value" />
        </mat-form-field>

        <mat-form-field
          fxFlex="30"
          class="example-full-width"
          appearance="outline"
          *ngIf="this.visible === false">
          <mat-label>{{ 'generic.request' | translate }}</mat-label>
          <input
            type="text"
            placeholder="Solicitante"
            aria-label="text"
            #filter
            matInput
            [matAutocomplete]="autoRequester"
            [formControl]="collaboratorControl" />
          <mat-error
            *ngIf="
              collaboratorControl && collaboratorControl.hasError('required')
            ">
            {{ 'validators.validator-required' | translate }}
          </mat-error>
          <mat-error
            *ngIf="
              collaboratorControl &&
              !collaboratorControl.hasError('required') &&
              collaboratorControl.hasError('incorrect')
            ">
            {{ 'validators.select-option' | translate }}
          </mat-error>
          <mat-autocomplete
            autoActiveFirstOption
            #autoRequester="matAutocomplete"
            [displayWith]="displayFnRequester">
            <mat-option
              *ngFor="let collaborator of filteredCollaborators"
              [value]="collaborator">
              {{ collaborator.firstNameCorporateName }}
              {{ collaborator.lastNameFantasyName }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <mat-form-field
          appearance="outline"
          *ngIf="this.visible === true"
          fxFlex="35"
          class="example-full-width">
          <mat-label>{{
            'job.job_interview_create.evaluator' | translate
          }}</mat-label>
          <input
            disabled
            matInput
            disableRipple
            [value]="this.collaboratorControl.value" />
        </mat-form-field>

        <mat-form-field fxFlex="30" appearance="outline">
          <mat-label>{{
            'job.job_interview_create.interview_date' | translate
          }}</mat-label>
          <input
            matInput
            mask="00/00/0000"
            [showMaskTyped]="true"
            [dropSpecialCharacters]="false"
            formControlName="technicalInterviewDate"
            placeholder="Data da Entrevista" />
            <mat-error *ngIf="technicalInterviewForm && technicalInterviewForm.controls['technicalInterviewDate'].hasError('dataNotValid')">
              Data não pode ser superior ao dia atual!
            </mat-error>
        </mat-form-field>
      </div>
      <div fxFlex="100" fxLayoutGap="16px">
        <mat-form-field fxFlex="50" appearance="outline">
          <mat-label>{{
            'job.job_interview_create.hour_interview' | translate
          }}</mat-label>
          <input
            matInput
            formControlName="hourInterview"
            mask="Hh:m0"
            [leadZeroDateTime]="true" />
        </mat-form-field>

        <mat-form-field fxFlex="50" appearance="outline">
          <mat-label>{{
            'job.job_interview_create.punctuality.name' | translate
          }}</mat-label>
          <mat-select matInput disableRipple formControlName="punctuality">
            <mat-option [value]="1">{{
              'job.job_interview_create.punctuality.one_off' | translate
            }}</mat-option>
            <mat-option [value]="2">{{
              'job.job_interview_create.punctuality.late_5_minutes' | translate
            }}</mat-option>
            <mat-option [value]="3">{{
              'job.job_interview_create.punctuality.more_than_5_minutes_late'
                | translate
            }}</mat-option>
            <mat-option [value]="4">{{
              'job.job_interview_create.punctuality.did_not_attend' | translate
            }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div fxFlex="100" fxLayoutGap="16px">
        <mat-form-field fxFlex="50" appearance="outline">
          <mat-label>{{
            'job.job_interview_create.technical_evaluation' | translate
          }}</mat-label>
          <textarea
            class="text-area"
            matInput
            placeholder="Avaliação Técnica"
            formControlName="technicalEvaluation"></textarea>
        </mat-form-field>
        <mat-form-field fxFlex="50" appearance="outline">
          <mat-label>{{
            'job.job_interview_create.comments' | translate
          }}</mat-label>
          <textarea
            class="text-area"
            matInput
            placeholder="Observações"
            formControlName="comments"></textarea>
        </mat-form-field>
      </div>
      <div fxFlex="100" fxLayoutGap="16px">
        <mat-form-field fxFlex="50" appearance="outline">
          <mat-label>{{
            'job.job_interview_create.situational.name' | translate
          }}</mat-label>
          <mat-select
            matInput
            disableRipple
            formControlName="situational"
            (ngModelChange)="onChange($event)">
            <mat-option [value]="1">{{
              'job.job_interview_create.situational.okay' | translate
            }}</mat-option>
            <mat-option [value]="2">{{
              'job.job_interview_create.situational.approved_with_reservations'
                | translate
            }}</mat-option>
            <mat-option [value]="3">{{
              'job.job_interview_create.situational.disapproved' | translate
            }}</mat-option>
            <mat-option [value]="4">{{
              'job.job_interview_create.situational.failed_with_reservations'
                | translate
            }}</mat-option>
            <mat-option [value]="5">{{
              'collaborator.colaborator_create.feedbacks.status.scheduled'
                | translate
            }}</mat-option>
          </mat-select>
        </mat-form-field>

        <div class="job-checkbox" fxFlex="50" fxLayoutAlign="center">
          <mat-checkbox class="custom-frame"  color="primary" formControlName="jobProfile">{{
            'job.job_interview_create.job_profile' | translate
          }}</mat-checkbox>
        </div>

        
      </div>
      <div fxLayoutAlign="center" fxFlex="20">
        <button
          mat-flat-button
          color="primary"
          class="save-button"
          (click)="saveInterview()"
          [disabled]="
            technicalInterviewForm.invalid ||
            ResumeControl.invalid ||
            collaboratorControl.invalid
          ">
          {{ 'generic.save_button' | translate }}
        </button>
      </div>
    </form>
  </div>
</div>
